<mxfile host="app.diagrams.net" modified="2024-01-15" agent="lzctl-docs" version="22.1.0">
  <diagram id="L1-containers" name="L1 - Container Diagram">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="L1 - Container Diagram: lzctl Internal Architecture" style="text;html=1;fontSize=18;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="300" y="10" width="800" height="40" as="geometry"/>
        </mxCell>

        <!-- System boundary -->
        <mxCell id="boundary" value="lzctl CLI" style="rounded=1;whiteSpace=wrap;html=1;fontSize=14;fontStyle=1;fillColor=none;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;spacingTop=5;arcSize=3;" vertex="1" parent="1">
          <mxGeometry x="60" y="60" width="1280" height="520" as="geometry"/>
        </mxCell>

        <!-- Cobra CLI Layer -->
        <mxCell id="cmd" value="&lt;b&gt;cmd/&lt;/b&gt;&lt;br&gt;[Cobra Commands]&lt;br&gt;&lt;br&gt;init, assess, select,&lt;br&gt;plan, apply, validate,&lt;br&gt;drift, docs, policy" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#438DD5;fontColor=#ffffff;strokeColor=#3C7FC0;" vertex="1" parent="1">
          <mxGeometry x="500" y="90" width="400" height="90" as="geometry"/>
        </mxCell>

        <!-- Internal packages row 1 -->
        <mxCell id="scaffold" value="&lt;b&gt;scaffold&lt;/b&gt;&lt;br&gt;Dual-mode repo&lt;br&gt;generation" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="80" y="230" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="profiles" value="&lt;b&gt;profiles&lt;/b&gt;&lt;br&gt;CAF catalog,&lt;br&gt;bundles, mapping" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="250" y="230" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="planner" value="&lt;b&gt;planner&lt;/b&gt;&lt;br&gt;Mode-aware plan&lt;br&gt;+ catalog estimation" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="420" y="230" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="applier" value="&lt;b&gt;applier&lt;/b&gt;&lt;br&gt;Ring-based apply&lt;br&gt;(Accel + Manual)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="590" y="230" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="assess" value="&lt;b&gt;assess&lt;/b&gt;&lt;br&gt;Azure SDK discovery&lt;br&gt;+ CAF scorecards" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="760" y="230" width="150" height="70" as="geometry"/>
        </mxCell>

        <!-- Internal packages row 2 -->
        <mxCell id="policy" value="&lt;b&gt;policy&lt;/b&gt;&lt;br&gt;EPAC lifecycle&lt;br&gt;(createâ†’deploy)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="930" y="230" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="validate" value="&lt;b&gt;validate&lt;/b&gt;&lt;br&gt;8-check manifest&lt;br&gt;validation suite" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="1100" y="230" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="drift" value="&lt;b&gt;drift&lt;/b&gt;&lt;br&gt;TF refresh-only&lt;br&gt;drift detection" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="80" y="340" width="150" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="docs" value="&lt;b&gt;docs&lt;/b&gt;&lt;br&gt;README, reports,&lt;br&gt;draw.io diagrams" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#0078D4;fontColor=#ffffff;strokeColor=#005A9E;" vertex="1" parent="1">
          <mxGeometry x="250" y="340" width="150" height="70" as="geometry"/>
        </mxCell>

        <!-- Shared packages -->
        <mxCell id="manifest" value="&lt;b&gt;manifest&lt;/b&gt;&lt;br&gt;YAML types, load/save,&lt;br&gt;path resolution" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#107C10;fontColor=#ffffff;strokeColor=#0B6A0B;" vertex="1" parent="1">
          <mxGeometry x="500" y="340" width="200" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="azauth" value="&lt;b&gt;azauth&lt;/b&gt;&lt;br&gt;Azure auth wrapper&lt;br&gt;(CLI/SPN/MSI)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#107C10;fontColor=#ffffff;strokeColor=#0B6A0B;" vertex="1" parent="1">
          <mxGeometry x="720" y="340" width="180" height="70" as="geometry"/>
        </mxCell>

        <!-- Data stores -->
        <mxCell id="yaml" value="&lt;b&gt;YAML Manifests&lt;/b&gt;&lt;br&gt;tenant.yaml&lt;br&gt;profiles.yaml&lt;br&gt;adoption-mapping.yaml" style="shape=cylinder3;whiteSpace=wrap;html=1;fontSize=10;fillColor=#FFF4CE;strokeColor=#D6B656;size=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="470" width="180" height="90" as="geometry"/>
        </mxCell>
        <mxCell id="catalog" value="&lt;b&gt;Profile Catalog&lt;/b&gt;&lt;br&gt;profiles/catalog.yaml" style="shape=cylinder3;whiteSpace=wrap;html=1;fontSize=10;fillColor=#FFF4CE;strokeColor=#D6B656;size=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="470" width="160" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="policystore" value="&lt;b&gt;Policy Artifacts&lt;/b&gt;&lt;br&gt;policies/&lt;br&gt;definitions, initiatives,&lt;br&gt;assignments, workflow.yaml" style="shape=cylinder3;whiteSpace=wrap;html=1;fontSize=10;fillColor=#FFF4CE;strokeColor=#D6B656;size=10;" vertex="1" parent="1">
          <mxGeometry x="620" y="470" width="180" height="90" as="geometry"/>
        </mxCell>

        <!-- External: Azure -->
        <mxCell id="azure" value="&lt;b&gt;Azure Resource Manager&lt;/b&gt;&lt;br&gt;[External]" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#999999;fontColor=#ffffff;strokeColor=#8C8C8C;" vertex="1" parent="1">
          <mxGeometry x="950" y="480" width="200" height="60" as="geometry"/>
        </mxCell>

        <!-- Key edges -->
        <mxCell id="e-cmd-scaffold" value="" style="endArrow=block;endFill=1;fontSize=9;exitX=0.5;exitY=1;" edge="1" parent="1" source="cmd" target="scaffold">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-cmd-planner" value="" style="endArrow=block;endFill=1;fontSize=9;" edge="1" parent="1" source="cmd" target="planner">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-cmd-applier" value="" style="endArrow=block;endFill=1;fontSize=9;" edge="1" parent="1" source="cmd" target="applier">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-cmd-assess" value="" style="endArrow=block;endFill=1;fontSize=9;" edge="1" parent="1" source="cmd" target="assess">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-cmd-policy" value="" style="endArrow=block;endFill=1;fontSize=9;" edge="1" parent="1" source="cmd" target="policy">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-all-manifest" value="all packages use" style="endArrow=block;endFill=1;fontSize=9;dashed=1;" edge="1" parent="1" source="planner" target="manifest">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-assess-azure" value="Azure SDK" style="endArrow=block;endFill=1;fontSize=9;" edge="1" parent="1" source="assess" target="azure">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e-assess-azauth" value="" style="endArrow=block;endFill=1;fontSize=9;" edge="1" parent="1" source="assess" target="azauth">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="&lt;b&gt;Legend&lt;/b&gt;&lt;br&gt;Blue (#438DD5) = CLI layer&lt;br&gt;Azure Blue (#0078D4) = Domain packages&lt;br&gt;Green (#107C10) = Shared infrastructure&lt;br&gt;Yellow = Data stores&lt;br&gt;Gray = External systems" style="text;html=1;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="40" y="630" width="250" height="100" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
